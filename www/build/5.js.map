{"version":3,"sources":["../../src/pages/subtasks/subtasks.ts","../../src/pages/subtasks/subtasks.module.ts"],"names":[],"mappings":"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","file":"5.js","sourcesContent":["import { AngularFirestore, AngularFirestoreCollection } from 'angularfire2/firestore';\nimport { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, AlertController, ToastController } from 'ionic-angular';\n\nimport { Subtask } from './../../models/subtask';\n\nimport { SubtaskService } from './../../providers/subtask-service';\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\nimport { Observable } from 'rxjs/Rx';\n\nimport moment from \"moment\";\n\nimport { Calendar } from '@ionic-native/calendar';\n\n@IonicPage({\n  name: 'SubtasksPage',\n  segment: 'subtarefas'\n})\n@Component({\n  selector: 'page-subtasks',\n  templateUrl: 'subtasks.html',\n})\nexport class SubtasksPage {\n\n  id_task: string;\n  subtask_number: number;\n\n  subtask_number_up: number;\n\n  subtask = {} as Subtask;\n\n  subtaskForm: FormGroup;\n\n  subtaskCollection: AngularFirestoreCollection<any[]>;\n  subtaskDoc: Observable<any[]>;\n\n  color_priority: string;\n\n  constructor(public navCtrl: NavController, public navParams: NavParams,\n    public subtaskService: SubtaskService, public afs: AngularFirestore,\n    public formBuilder: FormBuilder, public alertCtrl: AlertController,\n    public toastCtrl: ToastController, public calendar: Calendar ) {\n\n      this.id_task = this.navParams.get('idTask');\n      this.subtask_number = this.navParams.get('subtask');\n\n\n      this.subtaskForm = this.formBuilder.group({\n        name: ['', [Validators.required, Validators.minLength(3)]]\n      })\n\n      this.subtaskCollection = this.afs.collection('subtasks',ref => ref.where('id_task','==', this.id_task).where('done','==',0));\n      this.subtaskDoc = this.subtaskCollection.valueChanges();\n\n    }\n\n  addSubtask(subtask: Subtask){\n\n    this.subtaskService.newSubtask(subtask).then((doc)=>{\n      this.afs.collection('subtasks').doc(`${doc.id}`).update({\n        id_subtask: doc.id,\n        id_task: this.id_task,\n        done: 0\n      })\n    })\n\n    this.subtask_number_up = this.subtask_number++;\n\n    this.afs.collection('tasks').doc(`${this.id_task}`).update({\n      subtask: this.subtask_number\n    })\n\n    this.subtaskForm.reset();\n\n    console.log(this.subtask_number_up);\n\n\n  }\n\n  addPriority(id_subtask: string): void{\n\n    let alert = this.alertCtrl.create();\n    alert.setTitle('Prioridade da tarefa');\n\n    alert.addInput({\n      type: 'radio',\n      label: 'Alta',\n      value: '1',\n      checked: true\n    });\n\n    alert.addInput({\n      type: 'radio',\n      label: 'Média',\n      value: '2',\n      checked: false\n    });\n\n    alert.addInput({\n      type: 'radio',\n      label: 'Baixa',\n      value: '3',\n      checked: false\n    });\n\n    alert.addButton('Cancelar');\n    alert.addButton({\n      text: 'OK',\n      handler: data => {\n\n        if(data==1){\n          this.color_priority = '#FF4500';\n        }if(data==2){\n          this.color_priority = '#FF8C00';\n        }if(data==3){\n          this.color_priority = '#FFD700';\n        }\n\n        this.subtaskService.addPrioritySubtask(id_subtask,data,this.color_priority);\n\n      }\n    });\n    alert.present();\n  }\n\n\n  addReminder(id_subtask: string): void{\n    let options = { calendarName: 'TudoList', firstReminderMinutes: 15 };\n\n      let alertReminder = this.alertCtrl.create({\n        subTitle: \"Lembrete criado com sucesso!\",\n        buttons: ['OK']\n      });\n\n      const alert = this.alertCtrl.create({\n        title: 'Lembrete',\n        inputs: [\n          {\n            name: 'name',\n            placeholder: 'Nome*',\n            type: 'text'\n          },\n          {\n            name: 'description',\n            placeholder: 'Descrição(opcional)',\n            type: 'text'\n          },\n          {\n            name: 'local',\n            placeholder: 'Local(opcional)',\n            type: 'text'\n          },\n          {\n            name: 'initial_date',\n            placeholder: 'Data inicial*',\n            type: 'date'\n          },\n          {\n            name: 'final_date',\n            placeholder: 'Data final*',\n            type: 'date'\n          },\n        ],\n        buttons: [\n          {\n            text: 'Cancelar',\n            role: 'cancel'\n          },\n          {\n            text: 'Ok',\n            handler: data => {\n\n              this.calendar.createEventInteractivelyWithOptions(data.name,data.local,data.description,moment(data.inicial_date).toDate(),moment(data.final_date).toDate(),options).\n              then(()=>{\n                this.subtaskService.addReminderSubtask(id_subtask,data.name,data.local,data.description,data.initial_date,data.final_date);\n                alertReminder.present();\n              }).catch((e)=>{\n                alertReminder.setSubTitle(\"Erro ao criar o lembrete! Tente novamente...\");\n                alertReminder.setMessage(e);\n                alertReminder.present();\n              })\n            }\n          }\n        ]\n      });\n      alert.present();\n\n  }\n\n\n  doneSubtask(id_subtask: string): void{\n\n    this.subtaskService.doneSubtask(id_subtask);\n\n    this.subtask_number_up = this.subtask_number_up - 1;\n\n    this.afs.collection('tasks').doc(`${this.id_task}`).update({\n      subtask: this.subtask_number_up\n    })\n\n\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/subtasks/subtasks.ts","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { SubtasksPage } from './subtasks';\n\n@NgModule({\n  declarations: [\n    SubtasksPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(SubtasksPage),\n  ],\n})\nexport class SubtasksPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/subtasks/subtasks.module.ts"],"sourceRoot":""}