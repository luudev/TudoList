{"version":3,"sources":["../../src/pages/subtasks/subtasks.ts","../../src/pages/subtasks/subtasks.module.ts"],"names":[],"mappings":"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","file":"5.js","sourcesContent":["import { AngularFirestore, AngularFirestoreCollection } from 'angularfire2/firestore';\nimport { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, AlertController, ToastController } from 'ionic-angular';\n\nimport { Subtask } from './../../models/subtask';\n\nimport { SubtaskService } from './../../providers/subtask-service';\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\nimport { Observable } from 'rxjs/Rx';\n\n@IonicPage({\n  name: 'SubtasksPage',\n  segment: 'subtarefas'\n})\n@Component({\n  selector: 'page-subtasks',\n  templateUrl: 'subtasks.html',\n})\nexport class SubtasksPage {\n\n  id_task: string;\n  subtask_number: number;\n\n  subtask_number_up: number;\n\n  subtask = {} as Subtask;\n\n  subtaskForm: FormGroup;\n\n  subtaskCollection: AngularFirestoreCollection<any[]>;\n  subtaskDoc: Observable<any[]>;\n\n  color_priority: string;\n\n  constructor(public navCtrl: NavController, public navParams: NavParams,\n    public subtaskService: SubtaskService, public afs: AngularFirestore,\n    public formBuilder: FormBuilder, public alertCtrl: AlertController,\n    public toastCtrl: ToastController ) {\n\n      this.id_task = this.navParams.get('idTask');\n      this.subtask_number = this.navParams.get('subtask');\n\n\n\n      this.subtaskForm = this.formBuilder.group({\n        name: ['', [Validators.required, Validators.minLength(3)]]\n      })\n\n      this.subtaskCollection = this.afs.collection('subtasks',ref => ref.where('id_task','==', this.id_task).where('done','==',0));\n      this.subtaskDoc = this.subtaskCollection.valueChanges();\n\n    }\n\n  addSubtask(subtask: Subtask){\n\n    this.subtaskService.newSubtask(subtask).then((doc)=>{\n      this.afs.collection('subtasks').doc(`${doc.id}`).update({\n        id_subtask: doc.id,\n        id_task: this.id_task,\n        done: 0\n      })\n    })\n\n    this.subtask_number_up = this.subtask_number++;\n\n    this.afs.collection('tasks').doc(`${this.id_task}`).update({\n      subtask: this.subtask_number\n    })\n\n    this.subtaskForm.reset();\n\n    console.log(this.subtask_number_up);\n\n\n  }\n\n  addPriority(id_subtask: string): void{\n\n    let alert = this.alertCtrl.create();\n    alert.setTitle('Prioridade da tarefa');\n\n    alert.addInput({\n      type: 'radio',\n      label: 'Alta',\n      value: '1',\n      checked: true\n    });\n\n    alert.addInput({\n      type: 'radio',\n      label: 'MÃ©dia',\n      value: '2',\n      checked: false\n    });\n\n    alert.addInput({\n      type: 'radio',\n      label: 'Baixa',\n      value: '3',\n      checked: false\n    });\n\n    alert.addButton('Cancelar');\n    alert.addButton({\n      text: 'OK',\n      handler: data => {\n\n        if(data==1){\n          this.color_priority = '#FF4500';\n        }if(data==2){\n          this.color_priority = '#FF8C00';\n        }if(data==3){\n          this.color_priority = '#FFD700';\n        }\n\n        this.subtaskService.addPrioritySubtask(id_subtask,data,this.color_priority);\n\n      }\n    });\n    alert.present();\n  }\n\n  doneSubtask(id_subtask: string): void{\n\n    this.subtaskService.doneSubtask(id_subtask);\n\n    this.subtask_number_up = this.subtask_number_up - 1;\n\n    this.afs.collection('tasks').doc(`${this.id_task}`).update({\n      subtask: this.subtask_number_up\n    })\n\n\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/subtasks/subtasks.ts","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { SubtasksPage } from './subtasks';\n\n@NgModule({\n  declarations: [\n    SubtasksPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(SubtasksPage),\n  ],\n})\nexport class SubtasksPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/subtasks/subtasks.module.ts"],"sourceRoot":""}