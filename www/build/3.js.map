{"version":3,"sources":["../../src/pages/user-profile/user-profile.ts","../../src/pages/user-profile/user-profile.module.ts"],"names":[],"mappings":"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","file":"3.js","sourcesContent":["import { AuthService } from './../../providers/auth-service';\nimport { Profile } from './../../models/profile';\nimport { Component, ChangeDetectorRef } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\n\nimport { Observable } from 'rxjs/Rx';\n\nimport { AngularFirestoreCollection, AngularFirestore } from 'angularfire2/firestore';\nimport { AngularFireAuth } from 'angularfire2/auth';\n\nimport * as firebase from 'firebase/app';\nimport 'firebase/auth';\n\n@IonicPage({\n  name: 'UserProfilePage',\n  segment: 'perfil'\n})\n@Component({\n  selector: 'page-user-profile',\n  templateUrl: 'user-profile.html',\n})\nexport class UserProfilePage {\n\n  userCollection: AngularFirestoreCollection<any[]>;\n  userDoc: Observable<any[]>;\n\n  edit: boolean = false;\n\n  filePhoto: File;\n\n  constructor(public navCtrl: NavController, public navParams: NavParams,\n    public afs: AngularFirestore, public afAuth: AngularFireAuth,\n    public authService: AuthService, public cdr: ChangeDetectorRef) {\n\n      const unsubscribe = firebase.auth().onAuthStateChanged(user=>{\n        if(user){\n          this.userCollection = this.afs.collection('users',ref => ref.where('user_uid','==',user.uid));\n          this.userDoc = this.userCollection.valueChanges();\n          this.cdr.detectChanges();\n          unsubscribe();\n        }\n      });\n    }\n\n    showEdit(): void{\n      this.edit = !this.edit;\n      this.cdr.detectChanges();\n    }\n\n    uploadPhoto(event){\n      this.filePhoto = event.target.files[0];\n    }\n\n    saveChange(profile: Profile): void{\n      let _this = this;\n\n      if(this.filePhoto){\n        let uploadTask = this.authService.setProfilePhoto(this.filePhoto,profile.user_uid);\n\n        uploadTask.on('state_changed',(snapshot)=>{\n\n        },(error:Error)=>{\n          alert('Erro ao salva foto!' + error);\n        }, ()=>{\n          uploadTask.snapshot.ref.getDownloadURL().then(function(url){\n            _this.afs.collection(`users`).doc(`${profile.user_uid}`).update({\n              photo: url\n            });\n          });\n        });\n      }\n\n      this.edit = !this.edit;\n      this.cdr.detectChanges();\n    }\n\n  }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/user-profile/user-profile.ts","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { UserProfilePage } from './user-profile';\n\n@NgModule({\n  declarations: [\n    UserProfilePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(UserProfilePage),\n  ],\n})\nexport class UserProfilePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/user-profile/user-profile.module.ts"],"sourceRoot":""}